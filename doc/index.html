<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>ask-form-sdk</title>
	<meta name="description" content="Documentation for ask-form-sdk">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">ask-form-sdk</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>ask-form-sdk</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#alexa-form-sdk" id="alexa-form-sdk" style="color: inherit; text-decoration: none;">
					<h1>Alexa Form SDK</h1>
				</a>
				<a href="#introduction" id="introduction" style="color: inherit; text-decoration: none;">
					<h2>Introduction</h2>
				</a>
				<p>This Alexa Form SDK for Node.js provides support for creating skills for dynamic questions and answer forms.</p>
				<a href="#features" id="features" style="color: inherit; text-decoration: none;">
					<h2>Features</h2>
				</a>
				<p>In order to support flexible and dynamic forms, this sample includes a number of advanced features.</p>
				<ol>
					<li>Conditional slot support (eg if answered &#39;yes&#39; to slot one, then prompt for slot two).</li>
					<li>List disambiguation with support for custom prompts (eg I found 2 matches, did you mean &quot;X&quot;)</li>
					<li>Decimal number support (eg &quot;negative three point one four&quot; as &quot;-3.14&quot;) including units of measure (eg 5 percent).</li>
					<li>Numeric validate with custom prompts (eg require whole numbers, or min &lt;= value &lt;= max)</li>
					<li>Skipping field collection in a form (eg &quot;skip&quot; to move to next record, or &quot;previous&quot; to go back).</li>
					<li>Confirmation of form fields before delegating to save action.</li>
				</ol>
				<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
					<h2>Getting started</h2>
				</a>
				<a href="#using-the-template" id="using-the-template" style="color: inherit; text-decoration: none;">
					<h3>Using the template</h3>
				</a>
				<p>Use the ASK CLI to <a href="https://developer.amazon.com/en-GB/docs/alexa/smapi/ask-cli-intro.html#create-new-skill">Create a new skill</a> with a template-url:</p>
				<pre><code><span style="color: #001080">ask</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> --</span><span style="color: #001080">template</span><span style="color: #000000">-</span><span style="color: #001080">url</span><span style="color: #000000"> https:</span><span style="color: #008000">//github.com/aws-samples/ask-form-template.git</span>
</code></pre>
				<p>You are prompted to choose a method to host your skill&#39;s backend resources:</p>
				<ul>
					<li><code>Alexa-hosted-skills</code> (Do not choose this)</li>
					<li><code>AWS with CloudFormation</code> (Choose this to for AWS Lambda with persistence to Amazon DynamoDB)</li>
					<li><code>AWS Lambda</code> (Choose this if you want to deploy to AWS Lambda without AWS CloudFormation)</li>
				</ul>
				<p>You will then be warned you about downloading an unofficial template.</p>
				<p>Input <strong>Yes</strong> to continue provide a skill name eg. <code>my-survey</code>.</p>
				<pre><code><span style="color: #000000">? </span><span style="color: #001080">Choose</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> </span><span style="color: #001080">method</span><span style="color: #000000"> </span><span style="color: #001080">to</span><span style="color: #000000"> </span><span style="color: #001080">host</span><span style="color: #000000"> </span><span style="color: #001080">your</span><span style="color: #000000"> </span><span style="color: #001080">skill</span><span style="color: #A31515">&#039;s backend resources:  AWS with CloudFormatio</span><span style="color: #CD3131">n</span>
<span style="color: #000000">[</span><span style="color: #001080">Warn</span><span style="color: #000000">]: </span><span style="color: #0070C1">CLI</span><span style="color: #000000"> </span><span style="color: #001080">is</span><span style="color: #000000"> </span><span style="color: #001080">about</span><span style="color: #000000"> </span><span style="color: #001080">to</span><span style="color: #000000"> </span><span style="color: #001080">download</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #001080">skill</span><span style="color: #000000"> </span><span style="color: #001080">template</span><span style="color: #000000"> </span><span style="color: #001080">from</span><span style="color: #000000"> </span><span style="color: #001080">unofficial</span><span style="color: #000000"> </span><span style="color: #001080">template</span><span style="color: #000000"> https:</span><span style="color: #008000">//github.com/aws-samples/ask-form-template.git. Please make sure you understand the source code to best protect yourself from malicious usage.</span>
<span style="color: #000000">? </span><span style="color: #001080">Would</span><span style="color: #000000"> </span><span style="color: #001080">you</span><span style="color: #000000"> </span><span style="color: #001080">like</span><span style="color: #000000"> </span><span style="color: #001080">to</span><span style="color: #000000"> </span><span style="color: #001080">continue</span><span style="color: #000000"> </span><span style="color: #001080">download</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #001080">skill</span><span style="color: #000000"> </span><span style="color: #001080">template</span><span style="color: #000000">?  </span><span style="color: #001080">Yes</span>
<span style="color: #000000">? </span><span style="color: #001080">Please</span><span style="color: #000000"> </span><span style="color: #001080">type</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">your</span><span style="color: #000000"> </span><span style="color: #001080">skill</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #001080">my</span><span style="color: #000000">-</span><span style="color: #001080">survey</span>
<span style="color: #000000">? </span><span style="color: #001080">Please</span><span style="color: #000000"> </span><span style="color: #001080">type</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">your</span><span style="color: #000000"> </span><span style="color: #001080">folder</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000"> </span><span style="color: #001080">for</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #001080">skill</span><span style="color: #000000"> </span><span style="color: #795E26">project</span><span style="color: #000000"> (</span><span style="color: #001080">alphanumeric</span><span style="color: #000000">):  </span><span style="color: #001080">my</span><span style="color: #000000">-</span><span style="color: #001080">survey</span>
</code></pre>
				<p>Change into your project directory, and list the contents.  You will see the template includes a <code>lambda</code> folder with a samples <code>forms</code> folder used to generate skill interaction model, as well as <code>infrastructure</code> to deploy cloud formation if required.</p>
				<pre><code><span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">cd</span><span style="color: #000000"> </span><span style="color: #001080">my</span><span style="color: #000000">-</span><span style="color: #001080">survey</span>
<span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">tree</span>
<span style="color: #000000">.</span>
<span style="color: #000000">├── </span><span style="color: #0070C1">LICENSE</span><span style="color: #000000">.</span><span style="color: #001080">txt</span>
<span style="color: #000000">├── </span><span style="color: #0070C1">README</span><span style="color: #000000">.</span><span style="color: #001080">md</span>
<span style="color: #000000">├── </span><span style="color: #001080">ask</span><span style="color: #000000">-</span><span style="color: #001080">resources</span><span style="color: #000000">.</span><span style="color: #001080">json</span>
<span style="color: #000000">├── </span><span style="color: #001080">infrastructure</span>
<span style="color: #000000">│   └── </span><span style="color: #001080">cfn</span><span style="color: #000000">-</span><span style="color: #001080">deployer</span>
<span style="color: #000000">│       └── </span><span style="color: #001080">skill</span><span style="color: #000000">-</span><span style="color: #001080">stack</span><span style="color: #000000">.</span><span style="color: #001080">yaml</span>
<span style="color: #000000">├── </span><span style="color: #001080">lambda</span>
<span style="color: #000000">│   ├── </span><span style="color: #001080">forms</span>
<span style="color: #000000">│   │   └── </span><span style="color: #001080">index</span><span style="color: #000000">.</span><span style="color: #001080">js</span>
<span style="color: #000000">│   ├── </span><span style="color: #001080">index</span><span style="color: #000000">.</span><span style="color: #001080">js</span>
<span style="color: #000000">│   └── </span><span style="color: #001080">package</span><span style="color: #000000">.</span><span style="color: #001080">json</span>
<span style="color: #000000">└── </span><span style="color: #001080">skill</span><span style="color: #000000">-</span><span style="color: #AF00DB">package</span>
<span style="color: #000000">    ├── </span><span style="color: #001080">assets</span>
<span style="color: #000000">    │   ├── </span><span style="color: #001080">en</span><span style="color: #000000">-</span><span style="color: #001080">US_largeIcon</span><span style="color: #000000">.</span><span style="color: #001080">png</span>
<span style="color: #000000">    │   └── </span><span style="color: #001080">en</span><span style="color: #000000">-</span><span style="color: #001080">US_smallIcon</span><span style="color: #000000">.</span><span style="color: #001080">png</span>
<span style="color: #000000">    ├── </span><span style="color: #001080">interactionModels</span>
<span style="color: #000000">    │   └── </span><span style="color: #001080">custom</span>
<span style="color: #000000">    │       └── </span><span style="color: #001080">en</span><span style="color: #000000">-</span><span style="color: #0070C1">US</span><span style="color: #000000">.</span><span style="color: #001080">json</span>
<span style="color: #000000">    └── </span><span style="color: #001080">skill</span><span style="color: #000000">.</span><span style="color: #001080">json</span>
</code></pre>
				<p>You will then be able to deploy this skill into your AWS account.  By default this will be deployed to the <code>us-east-1</code> region.</p>
				<ul>
					<li>Update the <code>.ask-resources.json</code> to specify a different region.</li>
				</ul>
				<pre><code class="language-shell"><span style="color: #000000">$ ask deploy</span>
</code></pre>
				<p>The default invocation is &quot;my survey&quot;. Once your skill is deployed, you can <a href="https://developer.amazon.com/en-US/docs/alexa/devconsole/test-your-skill.html">test your skill</a> in the Alexa developer console.</p>
				<p>Following is an example conversation.</p>
				<p><img src="ask-form-template.png" alt="ask-form-template"></p>
				<a href="#troubleshooting" id="troubleshooting" style="color: inherit; text-decoration: none;">
					<h3>Troubleshooting</h3>
				</a>
				<ul>
					<li>If you are getting the following error during <code>ask deploy</code>, then you already have the dynamo db table created with the name my-survey :<pre><code><span style="color: #000000">[</span><span style="color: #267F99">Error</span><span style="color: #000000">]: </span><span style="color: #001080">The</span><span style="color: #000000"> </span><span style="color: #001080">CloudFormation</span><span style="color: #000000"> </span><span style="color: #001080">deploy</span><span style="color: #000000"> </span><span style="color: #001080">failed</span><span style="color: #000000"> </span><span style="color: #001080">for</span><span style="color: #000000"> </span><span style="color: #001080">Alexa</span><span style="color: #000000"> </span><span style="color: #001080">region</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;default&quot;</span><span style="color: #000000">: </span><span style="color: #001080">AlexaPersistentAttributesTable</span><span style="color: #000000">[</span><span style="color: #0070C1">AWS</span><span style="color: #000000">::</span><span style="color: #001080">DynamoDB</span><span style="color: #000000">::</span><span style="color: #001080">Table</span><span style="color: #000000">]  </span><span style="color: #795E26">DELETE_COMPLETE</span><span style="color: #000000">(</span><span style="color: #001080">Resource</span><span style="color: #000000"> </span><span style="color: #001080">deleted</span><span style="color: #000000">. </span><span style="color: #001080">For</span><span style="color: #000000"> </span><span style="color: #001080">detailed</span><span style="color: #000000"> </span><span style="color: #001080">reasoning</span><span style="color: #000000">, </span><span style="color: #001080">please</span><span style="color: #000000"> </span><span style="color: #001080">check</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;events&quot;</span><span style="color: #000000"> </span><span style="color: #001080">tab</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">the</span><span style="color: #000000"> </span><span style="color: #0070C1">AWS</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000"> </span><span style="color: #001080">for</span><span style="color: #000000"> </span><span style="color: #001080">CloudFormation</span><span style="color: #000000"> </span><span style="color: #001080">stackId</span><span style="color: #000000"> &lt;</span><span style="color: #0070C1">STACK</span><span style="color: #000000">-</span><span style="color: #0070C1">ID</span><span style="color: #000000">&gt;)</span>
</code></pre>
					To resolve this issue you can fo to my-survey/infrastructure/cfn-deployer/skill-stack.yaml and change the name of the <code>PersistentAttributeTableName</code> default value from my-survey.</li>
					<li>If you are getting the following CLI error during deployment, it might be due to the ask profile settings ;<pre><code><span style="color: #000000">[</span><span style="color: #267F99">Error</span><span style="color: #000000">]: CliError: </span><span style="color: #001080">Skill</span><span style="color: #000000"> </span><span style="color: #AF00DB">package</span><span style="color: #000000"> </span><span style="color: #001080">src</span><span style="color: #000000"> </span><span style="color: #001080">is</span><span style="color: #000000"> </span><span style="color: #001080">not</span><span style="color: #000000"> </span><span style="color: #001080">found</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">ask</span><span style="color: #000000">-</span><span style="color: #001080">resources</span><span style="color: #000000">.</span><span style="color: #001080">json</span><span style="color: #000000">.</span>
</code></pre>
					Go to my-survey/ask-resources.json and check the profile to see if the profile used for deployment is present in this. If not add the profile use for deployment to this file.</li>
				</ul>
				<a href="#adding-to-an-existing-skill" id="adding-to-an-existing-skill" style="color: inherit; text-decoration: none;">
					<h3>Adding to an existing skill.</h3>
				</a>
				<p>If you already have an existing skill, you can extend it with the following three steps.</p>
				<ol>
					<li>Install library</li>
				</ol>
				<p>Install the package as a dev dependency with: </p>
				<pre><code class="language-shell"><span style="color: #000000">$ npm install ask-form-sdk</span>
</code></pre>
				<ol start="2">
					<li>Update lambda</li>
				</ol>
				<p>Add request handlers for <code>DecimalIntentHandler</code> and <code>FormListHandler</code>.  </p>
				<p>The <code>FormListHandler</code> class also has methods:</p>
				<ul>
					<li><code>handlerNext</code> - Move to next item in the form</li>
					<li><code>handlePrevious</code> - Move to previous item in the form</li>
					<li><code>handleUserEvent</code> - Handle APL touch event</li>
					<li><code>handleFormReview</code> - Display review screen</li>
				</ul>
				<p>These can be called from other intents eg <code>AMAZON.NextIntent</code> as shown below.</p>
				<pre><code class="language-javascript"><span style="color: #008000">// Import the decimal and form list handler</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">DecimalIntentHandler</span><span style="color: #000000">, </span><span style="color: #0070C1">FormListHandler</span><span style="color: #000000"> } = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ask-form-sdk&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Import your form definitions</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">forms</span><span style="color: #000000"> } = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;./forms&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Add an handler to optionally load user from session or API</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">ApiUserHandler</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #795E26">getUser</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">deviceId</span><span style="color: #000000"> = </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">requestEnvelope</span><span style="color: #000000">.</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">System</span><span style="color: #000000">.</span><span style="color: #001080">device</span><span style="color: #000000">.</span><span style="color: #001080">deviceId</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">serviceClientFactory</span><span style="color: #000000">) {</span>
<span style="color: #000000">            </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">upsServiceClient</span><span style="color: #000000"> = </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">serviceClientFactory</span><span style="color: #000000">.</span><span style="color: #795E26">getUpsServiceClient</span><span style="color: #000000">();</span>
<span style="color: #000000">            </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span>
<span style="color: #000000">                </span><span style="color: #001080">username:</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">upsServiceClient</span><span style="color: #000000">.</span><span style="color: #795E26">getProfileName</span><span style="color: #000000">(),</span>
<span style="color: #000000">                </span><span style="color: #001080">timeZone:</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">upsServiceClient</span><span style="color: #000000">.</span><span style="color: #795E26">getSystemTimeZone</span><span style="color: #000000">(</span><span style="color: #001080">deviceId</span><span style="color: #000000">),</span>
<span style="color: #000000">            };</span>
<span style="color: #000000">        }</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #795E26">canHandle</span><span style="color: #000000">() {</span>
<span style="color: #000000">        </span><span style="color: #008000">// Optionally add logical to check if there is a valid user for form</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">};</span>

<span style="color: #008000">// Create the forms handler passing the api user handler</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">formsHandler</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">FormListHandler</span><span style="color: #000000">(</span><span style="color: #001080">forms</span><span style="color: #000000">, </span><span style="color: #001080">ApiUserHandler</span><span style="color: #000000">);</span>

<span style="color: #008000">// Welcome intent</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">LaunchRequestHandler</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #795E26">canHandle</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">requestEnvelope</span><span style="color: #000000">.</span><span style="color: #001080">request</span><span style="color: #000000">.</span><span style="color: #001080">type</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;LaunchRequest&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #795E26">handle</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">speakOutput</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;Welcome to sample form, to get started say &quot;start form&quot;.&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">responseBuilder</span>
<span style="color: #000000">            .</span><span style="color: #795E26">speak</span><span style="color: #000000">(</span><span style="color: #001080">speakOutput</span><span style="color: #000000">)</span>
<span style="color: #000000">            .</span><span style="color: #795E26">reprompt</span><span style="color: #000000">(</span><span style="color: #001080">speakOutput</span><span style="color: #000000">)</span>
<span style="color: #000000">            .</span><span style="color: #795E26">getResponse</span><span style="color: #000000">();</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">};</span>

<span style="color: #008000">// Next handler calls into forms handler</span>
<span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">NextHandler</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">formsHandler</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">formsHandler</span><span style="color: #000000"> = </span><span style="color: #001080">formsHandler</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">    </span><span style="color: #795E26">canHandle</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">requestEnvelope</span><span style="color: #000000">.</span><span style="color: #001080">request</span><span style="color: #000000">.</span><span style="color: #001080">type</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;IntentRequest&#039;</span>
<span style="color: #000000">            &amp;&amp; </span><span style="color: #001080">handlerInput</span><span style="color: #000000">.</span><span style="color: #001080">requestEnvelope</span><span style="color: #000000">.</span><span style="color: #001080">request</span><span style="color: #000000">.</span><span style="color: #001080">intent</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;AMAZON.NextIntent&#039;</span>
<span style="color: #000000">            &amp;&amp; </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">formsHandler</span><span style="color: #000000">.</span><span style="color: #795E26">isCurrent</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">);</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">    </span><span style="color: #795E26">handle</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">formsHandler</span><span style="color: #000000">.</span><span style="color: #795E26">handleNext</span><span style="color: #000000">(</span><span style="color: #001080">handlerInput</span><span style="color: #000000">)</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">};</span>

<span style="color: #008000">// Add request handlers for (default intent handlers omitted for clarify)</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">requestHandlers</span><span style="color: #000000"> = </span><span style="color: #001080">Alexa</span><span style="color: #000000">.</span><span style="color: #001080">SkillBuilders</span><span style="color: #000000">.</span><span style="color: #795E26">custom</span><span style="color: #000000">()</span>
<span style="color: #000000">    .</span><span style="color: #795E26">addRequestHandlers</span><span style="color: #000000">(</span>
<span style="color: #000000">        </span><span style="color: #008000">// LaunchRequestHandler,</span>
<span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">DecimalIntentHandler</span><span style="color: #000000">(</span><span style="color: #001080">formsHandler</span><span style="color: #000000">),</span>
<span style="color: #000000">        </span><span style="color: #001080">formsHandler</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">NextHandler</span><span style="color: #000000">(</span><span style="color: #001080">formsHandler</span><span style="color: #000000">),</span>
<span style="color: #000000">        </span><span style="color: #001080">SaveFormIntentHandler</span><span style="color: #000000">, </span><span style="color: #008000">// Delete to SaveFormIntentHandler</span>
<span style="color: #000000">        </span><span style="color: #001080">ErrorHandler</span><span style="color: #000000">,</span>
<span style="color: #000000">    );</span>

<span style="color: #008000">// Optionally add other API or persistence handlers, then return lambda</span>
<span style="color: #267F99">exports</span><span style="color: #000000">.</span><span style="color: #001080">handler</span><span style="color: #000000"> = </span><span style="color: #001080">requestHandlers</span><span style="color: #000000">.</span><span style="color: #795E26">lambda</span><span style="color: #000000">();</span>
</code></pre>
				<ol start="3">
					<li>Add forms</li>
				</ol>
				<p>When creating the <code>FormListHandler</code> class you pass a list of forms, these include properties and optional validation as illustrated with this simple two slot form below.</p>
				<pre><code class="language-javascript"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">WholeNumberValidation</span><span style="color: #000000"> } = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;ask-form-sdk&#039;</span><span style="color: #000000">);</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">temperature</span><span style="color: #000000"> = {</span>
<span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;TemperatureIntent&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">title:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Temperature Form&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #795E26">prompt</span><span style="color: #001080">:</span><span style="color: #000000"> (</span><span style="color: #001080">slotNumber</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">slotNumber</span><span style="color: #000000"> === </span><span style="color: #098658">0</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#039;Welcome to the form. &#039;</span><span style="color: #000000"> : </span><span style="color: #A31515">&#039;&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">slots:</span><span style="color: #000000"> [</span>
<span style="color: #000000">        {</span>
<span style="color: #000000">            </span><span style="color: #001080">index:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;slot_three&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;AMAZON.NUMBER&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">prompt:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;What is the temperature (with units)?&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">reprompt:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;What temperature?&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">required:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">validation:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">WholeNumberValidation</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Please specify temperature as a whole number.&#039;</span><span style="color: #000000">),</span>
<span style="color: #000000">            ],</span>
<span style="color: #000000">        },</span>
<span style="color: #000000">        {</span>
<span style="color: #000000">            </span><span style="color: #001080">index:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;slot_three_units&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;DECIMAL_UNITS&#039;</span><span style="color: #000000">, </span><span style="color: #008000">// Can we just use the same general UNITS type?</span>
<span style="color: #000000">            </span><span style="color: #001080">prompt:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;For what units?&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">reprompt:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Is that in &quot;Celsius&quot; or &quot;Fahrenheit&quot;?&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">required:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span>
<span style="color: #000000">            </span><span style="color: #001080">options:</span><span style="color: #000000"> {</span>
<span style="color: #000000">                </span><span style="color: #A31515">&#039;C&#039;</span><span style="color: #001080">:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;Celcius&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;degree celcius&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;degrees celcius&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;centigrade&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                ],</span>
<span style="color: #000000">                </span><span style="color: #A31515">&#039;F&#039;</span><span style="color: #001080">:</span><span style="color: #000000"> [</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;Fahrenheit&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;degree fahrenheit&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                    </span><span style="color: #A31515">&#039;degrees fahrenheit&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                ],</span>
<span style="color: #000000">            },</span>
<span style="color: #000000">            </span><span style="color: #001080">conditional:</span><span style="color: #000000"> [{</span>
<span style="color: #000000">                </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;slot_three&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">                </span><span style="color: #001080">empty:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">, </span><span style="color: #008000">// Conditional if the slot_three is not empty</span>
<span style="color: #000000">            }],</span>
<span style="color: #000000">        },</span>
<span style="color: #000000">    ],</span>
<span style="color: #000000">    </span><span style="color: #795E26">confirmation</span><span style="color: #001080">:</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`Okay, would you like to save the temperature?`</span><span style="color: #000000">;</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #001080">delegate:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;SaveFormIntent&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #001080">samples:</span><span style="color: #000000"> [</span>
<span style="color: #000000">        </span><span style="color: #A31515">&#039;record temperature of {slot_three} {slot_three_units}&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&#039;record temperature of {slot_three}&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #A31515">&#039;record temperature&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    ],</span>
<span style="color: #000000">};</span>

<span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">forms</span><span style="color: #000000"> = [</span><span style="color: #001080">temperature</span><span style="color: #000000">];</span>
</code></pre>
				<a href="#customising-the-form-and-slots-definition" id="customising-the-form-and-slots-definition" style="color: inherit; text-decoration: none;">
					<h3>Customising the Form and Slots definition</h3>
				</a>
				<p>The form has a number of slots which you can configure.</p>
				<ul>
					<li><code>name</code>: unique name for the form.</li>
					<li><code>title</code>: unique title displayed on the card.</li>
					<li><code>slots</code>: the list of properties for each slot (see below)</li>
					<li><code>prompt(slotNumber)</code>: a function to return the prompt to display when beginning the form.</li>
					<li><code>confirmation(slots, slotValues)</code>: a function to return the prompt when completing the form.</li>
					<li><code>delegate</code>: the intent name to delegate to after confirmation eg &quot;StartFormIntent&quot;.</li>
					<li><code>samples</code>: the list of samples heard to start form eg &quot;start form&quot;.</li>
					<li><code>reviewPrompt(aplSupported, slotValues)</code>: optional function to return a prompt after the review page is displayed.</li>
					<li><code>aplProperties</code>:<ul>
							<li><code>previousDisplayText</code>: Optional text to prefix for previous item in list eg &quot;Previous&quot; </li>
							<li><code>nextDisplayText</code>: Optional text to prefix for next item in list eg &quot;Next&quot;</li>
							<li><code>endOfFormText</code>: Optional text to display for the end of the list eg &quot;End of form&quot;.</li>
						</ul>
					</li>
				</ul>
				<p>Each slot has a series of properties.</p>
				<ul>
					<li><code>name</code>: unique name for the slot.</li>
					<li><code>index</code>: optional number for the slot.</li>
					<li><code>type</code>: the Alexa <a href="https://developer.amazon.com/en-US/docs/alexa/custom-skills/slot-type-reference.html">Slot Type</a> </li>
					<li><code>options</code>: for custom slots, you can provide a list of options.</li>
					<li><code>prompt</code>: The prompt to ask user.</li>
					<li><code>reprompt</code>: The re-prompt message for user.</li>
					<li><code>required</code>: Specify boolean (true/false) if the field is required.</li>
					<li><code>conditional</code>: Optional list of conditional settings for this slot<ul>
							<li><code>name</code>: slot name to match condition</li>
							<li><code>empty</code>: Optional boolean (true/false) to make on an empty or non-empty field.</li>
							<li><code>value</code>: Optional value to match for slot.</li>
						</ul>
					</li>
				</ul>
				<p>You can customize the form and add new fields and delete/modify existing fields as required by the skill. This can be done by editing the index.js file under lambda/forms folder.</p>
				<a href="#code-generating-the-model" id="code-generating-the-model" style="color: inherit; text-decoration: none;">
					<h3>Code Generating the model</h3>
				</a>
				<p>Once you have made changes or additions to the form definition, you can code generate the model file(en-US). In order to do this, you need to install the ask-form-sdk. The following will install the SDKs globally for code generation, you can also access run locally via <code>node_modules/.bin/ask-form-codegen</code> command.</p>
				<pre><code class="language-shell"><span style="color: #000000">$ </span><span style="color: #795E26">cd</span><span style="color: #000000"> my-survey</span>
<span style="color: #000000">$ npm install -g ask-form-sdk</span>
</code></pre>
				<p>The code generation tool can take in the following options:</p>
				<ul>
					<li>-f : the path to forms</li>
					<li>-s : the path to the source model json</li>
					<li>-t : the path to the target model json</li>
					<li>-i : invocation name for skill. Provide this argument when the model is created from scratch.</li>
				</ul>
				<p>There are 2 options for code generation.</p>
				<ul>
					<li>Have the new form changes applied on top of the existing model file. This can be done by providing the existing model file as the source file:</li>
				</ul>
				<pre><code class="language-shell"><span style="color: #000000">$ ask-form-codegen -f lambda/forms/ -t skill-package/interactionModels/custom/en-US.json -s skill-package/interactionModels/custom/en-US.json</span>
</code></pre>
				<ul>
					<li>Have the model code generated from scratch. To generate the model file form scratch, provide the invocation name and do not provide any source model files :</li>
				</ul>
				<pre><code class="language-shell"><span style="color: #000000">$ ask-form-codegen -f lambda/forms/ -t skill-package/interactionModels/custom/en-US.json -i </span><span style="color: #A31515">&#039;my survey&#039;</span>
</code></pre>
				<p>This will create a model file with the fields in the form along with few other intents required by the skill.</p>
				<a href="#tests" id="tests" style="color: inherit; text-decoration: none;">
					<h2>Tests</h2>
				</a>
				<p>The <code>examples</code> folder defines a series of typescript test specifications using the <a href="https://github.com/taimos/ask-sdk-test">ask-sdk-test</a> framework that show cases some of the various features mentioned above.</p>
				<a href="#authors" id="authors" style="color: inherit; text-decoration: none;">
					<h2>Authors</h2>
				</a>
				<ul>
					<li><a href="http://github.com/brightsparc">Julian Bright</a></li>
					<li><a href="http://github.com/christy-maria">Christy maria Mathew</a></li>
				</ul>
				<a href="#security" id="security" style="color: inherit; text-decoration: none;">
					<h2>Security</h2>
				</a>
				<p>See <a href="CONTRIBUTING.md#security-issue-notifications">CONTRIBUTING</a> for more information.</p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>This library is licensed under the MIT-0 License. See the LICENSE.txt file.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/apl_templates.html">apl-<wbr>templates</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/apl_templates_apl_template_type.html">apl-<wbr>templates/apl-<wbr>template-<wbr>type</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/apl_templates_text_list_with_touch.html">apl-<wbr>templates/text-<wbr>list-<wbr>with-<wbr>touch</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/codegen.html">codegen</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/codegen_base_model.html">codegen/base-<wbr>model</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/codegen_model_codegen.html">codegen/model-<wbr>codegen</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/codegen_model_types.html">codegen/model-<wbr>types</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/decimal_intent_handler.html">decimal-<wbr>intent-<wbr>handler</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/form_handler_types.html">form-<wbr>handler-<wbr>types</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/form_intent_handler.html">form-<wbr>intent-<wbr>handler</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/form_list_handler.html">form-<wbr>list-<wbr>handler</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/form_types.html">form-<wbr>types</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/form_validation.html">form-<wbr>validation</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>